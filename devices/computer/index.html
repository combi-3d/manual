
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Manual of CoMBI">
      
      
      
        <meta name="author" content="Tajika Y.">
      
      
      <link rel="shortcut icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.4">
    
    
      
        <title>Computer and storage/コンピュータとストレージ - Manual of CoMBI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.75751829.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#computer-and-storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Manual of CoMBI" class="md-header-nav__button md-logo" aria-label="Manual of CoMBI">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Manual of CoMBI
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Computer and storage/コンピュータとストレージ
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Manual of CoMBI" class="md-nav__button md-logo" aria-label="Manual of CoMBI">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Manual of CoMBI
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="../../index.html" class="md-nav__link">
      Top page
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" data-md-state="indeterminate" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Installation/導入
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Installation/導入" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Installation/導入
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../system/index.html" class="md-nav__link">
      System Overview/概要
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../camera/index.html" class="md-nav__link">
      Imaging devices/カメラなど
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../selfmade/index.html" class="md-nav__link">
      Self-made devices/自作装置
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="index.html" class="md-nav__link">
      Computer and storage/コンピュータとストレージ
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../application/index.html" class="md-nav__link">
      Applications/アプリケーション
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" data-md-state="indeterminate" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Instruction/操作
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Instruction/操作" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Instruction/操作
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operation/frozenblock/index.html" class="md-nav__link">
      Frozen Block
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../operation/combi-u/index.html" class="md-nav__link">
      CoMBI-U (Universal)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../operation/combi-c/index.html" class="md-nav__link">
      CoMBI-C (Cryostat)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../operation/combi-s/index.html" class="md-nav__link">
      CoMBI-S (Sliding, motorized)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../operation/combi-s-m/index.html" class="md-nav__link">
      CoMBI-S (Sliding, manual)
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../operation/combi-r/index.html" class="md-nav__link">
      CoMBI-R (Rotary, manual)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" data-md-state="indeterminate" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Image Processing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Image Processing" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Image Processing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/introduction/index.html" class="md-nav__link">
      Overview/画像処理の概要
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/rawjpeg/index.html" class="md-nav__link">
      RAW to JPEG conversion/RAW現像
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/scale/index.html" class="md-nav__link">
      Resize/画像の縮小
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/registration/index.html" class="md-nav__link">
      Image Registration/ズレ補正
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/3dslicer/index.html" class="md-nav__link">
      3D Reconstruction, 3D slicer
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/icy/index.html" class="md-nav__link">
      3D Reconstruction, Icy
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/horos/index.html" class="md-nav__link">
      3D Reconstruction, Horos/OsiriX
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/correlation/index.html" class="md-nav__link">
      Correlation of 2D and 3D images/3D像に切片位置を示す
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/EDF/index.html" class="md-nav__link">
      Extended Depth of Field/深度合成
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../image-processing/ilastik/index.html" class="md-nav__link">
      Segmentation by ilastik/セグメンテーション
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../gallery/gallery/index.html" class="md-nav__link">
      Gallery/作品集
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../publication/publication/index.html" class="md-nav__link">
      Publications/論文
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" data-md-state="indeterminate" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Electronics
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Electronics" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Electronics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../electronics/ATmega328P/index.html" class="md-nav__link">
      ATmega328P standalone/単体利用
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../electronics/terminal/index.html" class="md-nav__link">
      Crimped terminal/圧着端子
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#computer" class="md-nav__link">
    Computer
  </a>
  
    <nav class="md-nav" aria-label="Computer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu" class="md-nav__link">
    GPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    Memory/メモリ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ストレージ
  </a>
  
    <nav class="md-nav" aria-label="ストレージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hdd-for-long-term-storage" class="md-nav__link">
    HDD for long-term storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssd-for-temporary-use" class="md-nav__link">
    SSD for temporary use
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-data-size" class="md-nav__link">
    Image data size/画像ファイルのサイズ
  </a>
  
    <nav class="md-nav" aria-label="Image data size/画像ファイルのサイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#image-file-format-and-size" class="md-nav__link">
    Image file format and size/画像形式と一枚のサイズ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-images" class="md-nav__link">
    Serial images/連続画像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imagej-settings-memory-threshold-imagej" class="md-nav__link">
    ImageJ settings; Memory threshold/ ImageJでのメモリ割り当て
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-ocupancy-during-image-processing" class="md-nav__link">
    Memory ocupancy during image processing/ メモリ使用率
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3d-slicer-recommendation-image-size-and-gpu-gpu" class="md-nav__link">
    3D slicer recommendation; image size and GPU/ 連続画像サイズとGPU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="computer-and-storage">Computer and storage/コンピュータとストレージ</h1>
<h2 id="computer">Computer</h2>
<p>This is a list of computers on which I have handled CoMBI data. Please refer to know if you can perform CoMBI on your own.</p>
<table>
<thead>
<tr>
<th>model</th>
<th>year</th>
<th>CPU</th>
<th>GPU</th>
<th>RAM</th>
<th>Storage</th>
<th>comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>iMac27</td>
<td>2017-</td>
<td>Core i7</td>
<td>Radeon 580X<br>DDR5 8GB</td>
<td>64GB</td>
<td>SSD 1TB</td>
<td>Currently working well.</td>
</tr>
<tr>
<td>MacBookPro15</td>
<td>2018-</td>
<td>Core i9</td>
<td>Vega20<br>HBM2 4GB</td>
<td>32GB</td>
<td>SSD 1TB</td>
<td>Currently working well.</td>
</tr>
<tr>
<td>iMac27</td>
<td>2012-2017</td>
<td>Core i7</td>
<td>Radeon<br>DDR4 2GB</td>
<td>32GB</td>
<td>HDD 2TB Fusion</td>
<td>Works well on 2012. Recall HDD and stand. GPU and Power failure.</td>
</tr>
<tr>
<td>MacBookPro13</td>
<td>2015-2018</td>
<td>Core i7</td>
<td>Intel<br>Iris</td>
<td>16GB</td>
<td>SSD 512GB</td>
<td>Not recommended, insufficient RAM, weak graphics</td>
</tr>
</tbody>
</table>
<p><span style="color:#444C99;">これまでに、私がCoMBIのデータを扱ってきたパソコン一覧です。お手元のパソコンでできるかどうかを知るために、参考にしてください。</span></p>
<hr />
<h3 id="cpu">CPU</h3>
<p>The number of cores and frequency of the CPU affect RAW development and Photoshop batch processing. Hyperthreding (HT) did not work in Photoshop (2019). Any modern Intel i5, i7, or i9 works well.
If you plan to use ilastik for segmentatin, get more cores as possible. ilastik needs more CPU power and core number. When I tried with iMac 4-core, 8-threads, PC and I were almost sleeping.</p>
<p><span style="color:#444C99;">CPUのコア数と周波数が、RAW現像と、Photoshop自動処理に効きます。Photoshopではhyperthreding (HT)は、効きませんでした（2019年）。いまどきのIntel i5, i7, i9なら、どれでもよく働きます。もし、ilastikで、Segmentationをするなら、コア数は多い方がいいです。ilastik作業は、CPUだけに負荷が掛かり、かなり高負荷です。4コア8スレッドのiMacでは眠くなります。</span></p>
<h3 id="gpu">GPU</h3>
<p>GPUs work well for 3D rendering, and 8GB of DDR5 or 4GB of HBM2 is enough. There are memory standards include DDR5, DDR6, and HBM2. HBM2 is referred to as the most powerful but expensive, and DDR6 as more powerful and inexpensive (2020).  The Apple M1 seems to be equivalent to 4GB of DDR5 (560X), and may be capable of 3D imaging. </p>
<p><span style="color:#444C99;">DDR5 8GBやHBM2 4GBで十分働きます。GPUは、3Dレンダリングに効きます。規格はDDR4, DDR5, DDR6, HBM2の順で高性能になります。HBM2規格は高性能だが高い、DDR6規格は高性能で安い（2020年)、と評されます。Apple M1は、どうやら、DDR5 4GB (560X)相当らしく、なんとか3Dイメージングはできそうですが、はやり、M1 pro, M1 max (5700XT, 16GB DDR6相当）のほうがいいでしょう。</span></p>
<h3 id="memory">Memory/メモリ</h3>
<p>Minimum;16GB, Recommended;32GB, Maximum;64GB.</p>
<p>The tasks that require more memory are serial image processing and RAW-JPEG conversion in ImageJ. If you have 16GB, you should use a virtual stack for opening a series of images instead of expanding them into memory. For serial image processing, you should use macro. For RAW-JPEG conversion, you might wait for overnight. This is because RAW-JPEG conversion takes up 1GB of memory for about every 100 conversions, then memory overload occurs, and the conversion becomes very slow. With 32GB or more, you don't have to pay attention or worry about those issues.</p>
<p><span style="color:#444C99;">最低16GBで余裕なく、推奨32GBから余裕がでてきます。64GBあれば安心です。メモリが必要な作業は、ImageJでの連続画像処理とRAW-JPEG変換です。16GBの場合、連続画像を開くときは、メモリに展開せず、virtual stackを使います。画像処理では、macro機能を使います。RAW−JPEG変換では、約100枚の変換ごとに1GBのメモリが占有されていきます。メモリオーバーになると、変換が非常にゆっくりになり、「つづきはまた明日」となるでしょう。32GB以上あれば、このような気配りや心配はなくなります。</span></p>
<h2 id="_1">ストレージ</h2>
<h3 id="hdd-for-long-term-storage">HDD for long-term storage</h3>
<p>I use an external HDD for long-term storage of data. When estimating the capacity, please refer to "50GB per sample" and "20 samples/year/1TB". In case of my activity, the data is 10-100 GB per sample, and 1-1.5 TB per year. The data is backed up on another HDD (Mac, TimeMachine).</p>
<p><span style="color:#444C99;">データの長期保存に外付けHDDを使っています。容量を見積もるときは、「1標本50GB」「20サンプル/1年/1TB」を参考にしてください。実際は、1標本で10〜100GB、年間1〜1.5TBになっています。データは、もう1枚のHDDにバックアップしています（Mac、TimeMachine）。</span></p>
<h3 id="ssd-for-temporary-use">SSD for temporary use</h3>
<p>I use an external SSD as a place to temporarily store my CoMBI data and work on image processing. I use the SSD to temporarily store my CoMBI data and to do image processing work. It is because the data can be read and written quickly and I expect that it may protect the SSD of the PC itself.</p>
<p>SSDs have a lifespan, which is linearly increasing with capacity. After 4 years of using an external 512GB SSD for CoMBI, the disk became unreadable. When I asked a person who use SSDs for gaming, they also said that 512GB SSDs would have a lifespan of about 4 years. I keep the original RAW data in multiple locations (SSD and SD card or HDD) until the image processing is finished.</p>
<p><span style="color:#444C99;">外付けSSDを、CoMBIデータを一時的に保管し、画像処理の作業をする場所として利用しています。理由は、データの読み書きが早いことと、PC本体のSSDを守れるかもという期待があるからです。SSDには寿命があり、容量に比例して長寿命です。外付け512GBSSDをCoMBIで使い続けたところ、4年後にディスクが読めなくなり寿命を迎えました。ゲームのためにSSDを使うという方にきいたところ、はやり4年程度の寿命だと思って512GB SSDを使っているそうです。いつ寿命が来てもいいように、画像処理の作業が終わるまでは、元のRAWデータを複数箇所（SSDとSDカードまたはHDD）に確保しています。</span></p>
<h2 id="image-data-size">Image data size/画像ファイルのサイズ</h2>
<p>We have described the recommended computer specifications and storage in previous sections, and here we will explain in detail citing the specific size of the image file.</p>
<p><span style="color:#444C99;">これまで、パソコンの推奨スペックやストレージに関して記載してきましたが、ここでは、画像ファイルの具体的なサイズを挙げ、メモリ、GPU、ストレージの必要スペックについて解説します。</span></p>
<h3 id="image-file-format-and-size">Image file format and size/画像形式と一枚のサイズ</h3>
<p>The table shows the size of a single color image in various image formats. For CoMBI, I use <strong>RAW imaging and JPEG processing</strong>. The original data is in RAW to maintain a rich gradation, and the data derived from the various image processing is in JPEG to save storage space. For cameras with full-size sensors, APS-C cropping may be used to save storage space. If 1000 block-face images per a sample are taken with full-size sensor in RAW, the total size will be 42GB/sample. </p>
<table>
<thead>
<tr>
<th>Format &nbsp;</th>
<th>Nikon D810<br>full-size<br>7360×4912 &nbsp;&nbsp;</th>
<th>Nikon D810<br>APS-C<br>4800×3200&nbsp;&nbsp;</th>
<th>Spec</th>
</tr>
</thead>
<tbody>
<tr>
<td>RAW</td>
<td>42 MB</td>
<td>26 MB</td>
<td>12, 16 bit</td>
</tr>
<tr>
<td>JPEG</td>
<td>3 MB</td>
<td>2 MB</td>
<td>8 bit</td>
</tr>
<tr>
<td>TIFF</td>
<td>100 MB</td>
<td>40 MB</td>
<td>8, 12, 16 bit</td>
</tr>
</tbody>
</table>
<p><span style="color:#444C99;">表は、各種画像形式でのカラー画像一枚のサイズです。ただし、JPEGは圧縮形式なので変動します。CoMBIの撮影では、<strong>RAWで撮影、JPEGで画像処理</strong>をしています。元データはRAWで豊かな階調数を保ち、さまざまな画像処理によって派生するデータはJPEGとすることで容量を節約します。フルサイズセンサーのカメラでは、APS−Cクロップで容量節約できる場合があります。</span></p>
<h3 id="serial-images">Serial images/連続画像</h3>
<p>The table shows the total size of continuous color images (RGB 8bit each). According to experience and calculations (see below), the limit of size that a computer can handle without difficulty is about 1000x1000x1000=3GB. A grayscale image takes up one-third the amount of a color image. JPEG images are stored in a compressed format with less space on the disk. However, when ImageJ or other software expands a series of JPEG images into memory, it requires as much memory as the image file size before compression. There is another mode that does not expand to the memory (virtual stack), but the image processing is much slower with virtual stack.</p>
<table>
<thead>
<tr>
<th>Image size <br>in Pixels</th>
<th>Number of<br>images</th>
<th>Data<br>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>500x500</td>
<td>500</td>
<td>0.4 GB</td>
</tr>
<tr>
<td>1000x1000</td>
<td>500</td>
<td>1.5 GB</td>
</tr>
<tr>
<td>700x700</td>
<td>1000</td>
<td>1.5 GB</td>
</tr>
<tr>
<td><strong>1000x1000</strong></td>
<td><strong>1000</strong></td>
<td><strong>3 GB</strong></td>
</tr>
<tr>
<td><strong>1200x1200</strong></td>
<td><strong>1000</strong></td>
<td><strong>4.3 GB</strong></td>
</tr>
<tr>
<td>1600x1200</td>
<td>1000</td>
<td>5.8 GB</td>
</tr>
<tr>
<td>1600x1200</td>
<td>1500</td>
<td>8.6 GB</td>
</tr>
<tr>
<td>1500x1500</td>
<td>1500</td>
<td>10 GB</td>
</tr>
</tbody>
</table>
<p><em>Some examples of 8bit color images. 1 pixel = 2^8 ＝ 256gradation, 8bit * 3colors ＝ 24bit ＝ 3byte. 8bit ＝ 1Byte</em></p>
<p><span style="color:#444C99;">表は、連続カラー画像（RGB 各8bit）の合計サイズをしめします。パソコンで軽快に扱える限界は、経験的にも、計算上（下記）も、約1000x1000x1000=3GBです。グレースケール画像なら、カラー画像の3分の1の容量になります。画像処理では、一辺数千ピクセルの元画像から、一辺500〜1000ピクセルの切り抜き像や縮小像を生成し、パソコンで扱える容量にします。JPEG画像は、圧縮された形式で、ディスク上では少ない容量で保存されています。しかし、ImageJなどで連続JPEG画像をメモリに展開するとき、圧縮前の容量分だけのメモリを必要とします。メモリに展開しないモード（Virtual stack）もありますが、展開できた方が断然画像処理は速いです。</span></p>
<h3 id="imagej-settings-memory-threshold-imagej">ImageJ settings; Memory threshold/ ImageJでのメモリ割り当て</h3>
<p>In ImageJ/FIJI, go to <code>Edit</code>&gt; <code>Options</code>&gt; <code>Memory &amp; Threads...</code>, and enter the memory size to be used for ImageJ. The recommended value is 70% of the installed memory.</p>
<p><span style="color:#444C99;">ImageJ/FIJIでは、<code>Edit</code>&gt; <code>Options</code>&gt; <code>Memory &amp; Threads...</code>より、割り当てるメモリサイズを入力します。推奨値は、搭載メモリの70％といわれています。</span></p>
<h3 id="memory-ocupancy-during-image-processing">Memory ocupancy during image processing/ メモリ使用率</h3>
<p>The table below shows the PC on-board memory and the memory size available to ImageJ. From this result, I propose <strong>minimum 16GB, recommend 32GB</strong>. If there is enough memory space, the data before and after image processing can be compared. ImageJ has a virtual stack mode, but some plug-ins may not work in this mode. Also, there is memory swap, and the OS resident part seems to be less. However, in order to handle serial images easily, I would like to have plenty of memory.</p>
<table>
<thead>
<tr>
<th>RAM<br>total&nbsp;</th>
<th>OS<br>etc</th>
<th>ImageJ &nbsp;&nbsp;</th>
<th>(ImageJ 1/2)</th>
<th>余剰</th>
</tr>
</thead>
<tbody>
<tr>
<td>8 GB</td>
<td>7 GB</td>
<td>1 GB</td>
<td>(0.5 GB)</td>
<td>0</td>
</tr>
<tr>
<td>16 GB</td>
<td>7 GB</td>
<td>9 GB</td>
<td>(4.5 GB)</td>
<td>0</td>
</tr>
<tr>
<td><strong>32 GB</strong></td>
<td>7 GB</td>
<td>22.4 GB</td>
<td>(11.2 GB)</td>
<td>2.6 GB</td>
</tr>
<tr>
<td>64 GB</td>
<td>7 GB</td>
<td>44.8 GB</td>
<td>(22.4 GB)</td>
<td>12.2 GB</td>
</tr>
</tbody>
</table>
<p><span style="color:#444C99;">表は、PC搭載メモリとImageJで使用可能なメモリサイズを計算したものです。MacでOSと常駐アプリを7GB、ImageJへの割当を70%としました。結果、<strong>最小構成は16GB、おすすめは32GB</strong>です。ImageJで使用できる最大と、半値を示しています。連続画像の倍の容量があれば、画像処理前後のデータを比較できます。ImageJでは、virtual stackモードがありますが、プラグインによっては動作しない場合があるため、注意が必要です。また、メモリスワップもあって、OS常駐部分は少なくてもよさそうです。しかし、連続画像を軽快に扱うためには潤沢なメモリを用意したいものです。</span></p>
<h3 id="3d-slicer-recommendation-image-size-and-gpu-gpu">3D slicer recommendation; image size and GPU/ 連続画像サイズとGPU</h3>
<p>The image data size limit recommended by 3D slicer is "half the value of the VRAM of the GPU installed". For example, if you have a GPU DDR5 8GB, 4GB is half the limit, which is roughly equivalent to 1200x1200x1000 color images = 4.3GB. In my experience, the limitation was similar　with other applications. I also reduce the quality of the displayed image, for performing 3D analysis smoother.</p>
<p><span style="color:#444C99;">3D slicerが推奨する画像データサイズの限界は、「搭載GPUのVRAMの半値」です。例えば、GPU DDR5 8GBなら、4GBが半値となり、おおかたカラー画像1200x1200x1000枚 = 4.3GBに相当します。経験的にも、別のアプリでも、同様の限界でした。ただし、グレースケールなら容量は3分の1になりますので、グレースケール由来でVolume Renderingを行うときは、大きめの画像や多数の画像をあつかえます。3Dの作業中、表示画質を落とすといった工夫も、必要に応じてやっています。</span></p>
<hr />
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © 2021 Tajika Y, CC BY-NC
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.expand'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>