
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Manual of CoMBI">
      
      
        <meta name="author" content="Tajika Y.">
      
      
      
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.7">
    
    
      
        <title>Horos/OsiriX (Mac) - Manual of CoMBI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f2e4d321.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#horososirix-mac" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Manual of CoMBI" class="md-header__button md-logo" aria-label="Manual of CoMBI" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Manual of CoMBI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Horos/OsiriX (Mac)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Manual of CoMBI" class="md-nav__button md-logo" aria-label="Manual of CoMBI" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Manual of CoMBI
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Top page
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation/導入
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installation/導入
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/system/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Overview/概要
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/camera/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Imaging devices/カメラなど
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/selfmade/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Self-made devices/自作装置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/computer/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computer and storage/コンピュータとストレージ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devices/application/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Applications/アプリケーション
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Instruction/操作
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Instruction/操作
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/frozenblock/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frozen Block
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/paraffinblock/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Paraffin Block
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/camerasettings/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Camera Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/tethering/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tethering (optional)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/combi-u/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CoMBI-U (Universal)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/combi-c/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CoMBI-C (Cryostat)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/combi-s/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CoMBI-S (Sliding, motorized)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/combi-s-m/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CoMBI-S (Sliding, manual)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/combi-r/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CoMBI-R (Rotary, manual)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Image Processing/画像処理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Image Processing/画像処理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview/概要
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rawjpeg/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RAW to JPEG conversion/RAW現像
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scale/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resizing and Reducing/画像の縮小
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../registration/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Registration/ズレ補正
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../automation/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automation/自動処理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3dslicer/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3D Reconstruction, 3D slicer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../icy/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3D Reconstruction, Icy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3D Reconstruction, Horos/OsiriX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../correlation/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Correlation of 2D and 3D images/3D像に切片位置を示す
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EDF/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extended Depth of Field/深度合成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ilastik/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Segmentation by ilastik/セグメンテーション
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gallery/gallery/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gallery/作品集
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publication/publication/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publications/論文
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Electronics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Electronics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/ATmega328P/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ATmega328P standalone/単体利用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/terminal/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crimped terminal/圧着端子
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/vender/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Venders/パーツの入手先
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/mkdocs/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mkdocs-material/HPづくり
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/camera_terminal/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Camera terminal/カメラ端子
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/Rstudio/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rstudio/練習中
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/ArduinoSerial/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arduino Serial Plotter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../electronics/macgpu/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3Ddata on Mac
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#things-to-do-in-horososirix" class="md-nav__link">
    <span class="md-ellipsis">
      Things to do in Horos/OsiriX /やることリスト
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bugs-in-horos" class="md-nav__link">
    <span class="md-ellipsis">
      Bugs in Horos/バグ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation/インストール、プラグイン追加（初回だけ）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation/インストール、プラグイン追加（初回だけ）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      App/アプリ本体
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugins" class="md-nav__link">
    <span class="md-ellipsis">
      plugins/プラグイン
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-operation-windowshoros" class="md-nav__link">
    <span class="md-ellipsis">
      Basic operation, windows/Horosの基礎、ウィンドウについて
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-jpeg-seriesjpegdicom" class="md-nav__link">
    <span class="md-ellipsis">
      Import JPEG series/JPEG連続画像を取り込む（DICOMに変換して取り込む）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-database" class="md-nav__link">
    <span class="md-ellipsis">
      Manage database/データベース（患者名）を整理する
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-grayscale-series" class="md-nav__link">
    <span class="md-ellipsis">
      Use grayscale series/グレースケール連続画像の利用
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-color-series" class="md-nav__link">
    <span class="md-ellipsis">
      Use color series/カラー画像の利用
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-operation" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced operation/発展的な操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2d-orthogonal-mpr" class="md-nav__link">
    <span class="md-ellipsis">
      2D orthogonal MPR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-mpr" class="md-nav__link">
    <span class="md-ellipsis">
      3D MPR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-volume-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      3D Volume Rendering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      セグメンテーション　Segmentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="セグメンテーション Segmentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-roi-specified-by-brightnessroi" class="md-nav__link">
    <span class="md-ellipsis">
      1. ROI specified by brightness/明るさでROI指定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-roi-specification-manuallyroi" class="md-nav__link">
    <span class="md-ellipsis">
      2. ROI specification manually/手作業でROI指定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. ROI specification manually/手作業でROI指定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-roi-save-roi" class="md-nav__link">
    <span class="md-ellipsis">
      Create ROI, save ROI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-roi-overlaied-on-volume-rendered-image" class="md-nav__link">
    <span class="md-ellipsis">
      Display ROI overlaied on volume rendered image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-values-of-roi-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Use values of ROI volume/体積の数値
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      準備
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roiroi" class="md-nav__link">
    <span class="md-ellipsis">
      ROI指定、ROIファイル保存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roi3d" class="md-nav__link">
    <span class="md-ellipsis">
      ROIを3D再構築像に重ね合わせる
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      体積の数値
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3roi-by-color-gamut" class="md-nav__link">
    <span class="md-ellipsis">
      3.ROI by color gamut/色域指定
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.ROI by color gamut/色域指定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#photoshop" class="md-nav__link">
    <span class="md-ellipsis">
      Photoshop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#photoshop_1" class="md-nav__link">
    <span class="md-ellipsis">
      Photoshop
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Photoshop">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tips" class="md-nav__link">
    <span class="md-ellipsis">
      Tips/ヒント
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#horososirix" class="md-nav__link">
    <span class="md-ellipsis">
      Horos/OsiriX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roi-by-imagejfijiimagejfijiroi" class="md-nav__link">
    <span class="md-ellipsis">
      ROI by ImageJ/FIJI/ImageJ/FIJIでROI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="horososirix-mac">Horos/OsiriX (Mac)</h1>
<p>This page is partially Japanease only. Horos can do; viewing DICOM, browsing, reconstructing multiple planes, and volume rendering. However, there are still some bugs in segmentation, creating movies, etc. Due to these bugs, I do not use Horos for the research purpose. I am using Horos for educational purpose; medical students can view DICOM files of CT and MRI to study human anatomy.  </p>
<h2 id="things-to-do-in-horososirix">Things to do in Horos/OsiriX /<span style="color:#444C99;">やることリスト</span></h2>
<ol>
<li>Installation of app and plug-ins/<span style="color:#444C99;">インストール、プラグイン追加（初回だけ）</span></li>
<li>Basic operation/<span style="color:#444C99;">Horosの基礎、ウィンドウについて。</span></li>
<li>Import JPEG series/<span style="color:#444C99;">連続JPEG画像をとりこむ。DICOM変換</span></li>
<li>Manage database/<span style="color:#444C99;">データベース（患者名）を整理する</span></li>
<li>Grayscale images for MPR and VR/<span style="color:#444C99;">グレースケール連続画像は、3D再構築Multiple planer reconstruction (MPR)とVolume Rendering（VR）に利用する</span></li>
<li>Color images for MPR/<span style="color:#444C99;">カラー画像は、3D再構築Multiple planer </span>reconstruction (MPR)に利用する</span></li>
<li>Create movie/<span style="color:#444C99;">動画を書き出す</span></li>
<li>Region of Interest（ROI）/<span style="color:#444C99;">関心領域</span><ol>
<li>Brightness/<span style="color:#444C99;">明暗でROI指定（Horosだけでやる方法）</span></li>
<li>Drawing<span style="color:#444C99;">/手作業でROI指定（Horosだけでやる方法）</span></li>
<li>Color/<span style="color:#444C99;">色域指定（Photoshopで処理してからHorosでやる方法）</span></li>
</ol>
</li>
</ol>
<hr />
<h2 id="bugs-in-horos">Bugs in Horos/バグ</h2>
<ul>
<li>
<p><strong>Can't install plug-ins</strong>
After installing v3.3.6, when I tried to add a plug-in (JPEG-DICOM), the list did not appear, but "No Horos plug-in server available. The previously installed Horos and JPEG-DICOM can be used. It seems that the application cannot access the server. The address (see below) seem to exist. Go to JPEGtoDICOM from the following site and download the file JPEGtoDICOM.horosplugin.zip. https://horosproject.org/horos-content/plugins/horos/
    <span style="color:#444C99;"><br><strong>プラグインをインストールできない 2021.03 （2021.6 できるようになった）</strong>v3.3.6をインストール後、プラグイン（JPEG-DICOM）を追加しようと思ったら、一覧が出てきません。「No Horos plug-in server available.」となります。以前にインストールされたHorosとJPEG-DICOMはそのまま使えますが、やはり一覧がでません。アプリからサーバにアクセスできないようです。ただし、コンテンツは存在しているようです。下記のサイトから、JPEGtoDICOMへ移動し、その中のJPEGtoDICOM.horosplugin.zipをダウンロードします。Horosを起動した状態で、ダウンロードしたファイルをダブルクリックするとインストールができるようです。</span></p>
</li>
<li>
<p><strong>Can't create movie properly</strong> (2020.12) In Horos 3.3.6 and earlier, movies from MPR (multiplanar reconstruction) can created with "Movie Export", but created movie become small. In v4.0.0 Release Candidate 4, the movie is slightly larger. RC4 has a bug with volume rendering. Fly Thru is broken. 
    <span style="color:#444C99;"><br><strong>MPR/VRからの動画描きだし 2020.12</strong> Horos 3.3.6やそれ以前のバージョンで、MPR(多平面再構築)から動画を描き出したいとき、Movie Exportを行います。しかし、書き出される動画が小さく(たてよこのピクセル数が少なく)なってしまうというバグがあります。v4.0.0 Release Candidate4では、やや大きくなるので実用的ですが、こんどはVolume Renderingでバグがります。いまのところ、新旧を使い分けるくらいしか、対応策がありません。新旧のバージョン両方をインストールして、区別するために名称変更して使っています。データベースフォルダは共通で使えるので、データベースが倍増することはありません。OsiriXでは問題ありません。</span></p>
<ul>
<li><span style="color:#444C99;">Horos 3.3.6:MPR動画は小さくて使いにくい(一辺約500 pixel)。VR動画は正常。</span></li>
<li><span style="color:#444C99;">Horos 4.0.0RC4:MPR動画はやや大きくなってなんとか使える(一辺約700 pixel)。VR動画はFly Thruの座標がずれるので使えない。</span></li>
<li><span style="color:#444C99;">OsiriX MD v11(有料版):MPR動画は大きくて実用的。VR動画は正常。</span></li>
</ul>
</li>
<li>
<p><strong>Shutdown app after segmentation</strong> (2020) When I tried to collect the volume values of the segments, the app was shutdown. I decided to use 3D slicer for segmentation for this issue.
   <span style="color:#444C99;"><br><strong>セグメンテーション後クラッシュ 2020</strong> Segmentationした領域の体積数値をみようとしたら、落ちました。いちおう回避策はありますが、この件でも、セグメンテーションは、3D slicerにしようと思いました。</span></p>
</li>
<li>
<p><strong>New Horos does not start 2020</strong> Horos 4.0.0 RC5 (2020.12) does not start 2D viewer, MBP13 (2105), OS11.1 Big Sur.
   <span style="color:#444C99;"><br><strong>新しいHorosが起動しない 2020</strong> Horos 4.0.0 RC5（2020.12）は、2Dビューワが起動しません。MBP13（2105）、OS11.1 Big Sur。</span></p>
</li>
</ul>
<hr />
<h2 id="installation">Installation/<span style="color:#444C99;">インストール、プラグイン追加（初回だけ）</span></h2>
<h3 id="app">App/<span style="color:#444C99;">アプリ本体</span></h3>
<p>Download app from below link and install. Use English only in the language setting.</p>
<p>https://horosproject.org </p>
<p><span style="color:#444C99;">ここからダウンロード、インストールする。日本語環境が用意されているが、フリーズするので、英語のまま使用すること。開くと、いろいろメッセージが出てくるけれど、とりあえず使ってみる。<code>Continue</code>ボタン。</span></p>
<h3 id="plugins">plugins/<span style="color:#444C99;">プラグイン</span></h3>
<p>Install the plugin "JPEG to DICOM", <code>Plug-ins</code> <code>Plug-in Manager</code>, a new window will open. Click <code>Horos Plugins</code> at the top and select <code>JPEG to DICOM</code> in the pull-down. Click <code>Download &amp; Install</code> at the bottom. You only need to do this once at the beginning of use.</p>
<p><span style="color:#444C99;">プラグイン「JPEG to DICOM」をインストール、<code>Plug-ins</code> <code>Plug-in Manager</code>で、新しいウィンドウが開く。上部の<code>Horos Plugins</code>をクリックし、プルダウンで<code>JPEG to DICOM</code>を選ぶ。下部の<code>Download &amp; Install</code>をクリック。この作業は、インストール後の使い始めに一度行うだけです。</span></p>
<h2 id="basic-operation-windowshoros">Basic operation, windows/<span style="color:#444C99;">Horosの基礎、ウィンドウについて</span></h2>
<p>Horos has three major types of windows, plus a number of variants. The following is a list of the five most frequently used windows. </p>
<p><span style="color:#444C99;">ウィンドウは、大きく分けて3種類あり、さらに派生したウィンドウもある。よく使うウィンドウを下記に5種類挙げた。データベースウィンドウで、見たいデータをダブルクリックして、2Dビューワを出す。2Dビューワで、メニューやボタンを使って、3Dビューワを出す。</span></p>
<ol>
<li>Database/<span style="color:#444C99;">データベース（起動時のウィンドウ）</span></li>
<li>2D viewer/<span style="color:#444C99;">2Dビューワ</span><ol>
<li>Drowsing slices/<span style="color:#444C99;">連続画像の閲覧</span></li>
<li>Orthogonal Planer Reconstruction/<span style="color:#444C99;">直行面再構築</span></li>
</ol>
</li>
<li>3D viewer/<span style="color:#444C99;">3Dビューワ</span><ol>
<li>Multiple Planer Reconstruction/<span style="color:#444C99;">多平面再構築</span></li>
<li>Volume Rendering/<span style="color:#444C99;">ボリュームレンダリング</span></li>
</ol>
</li>
</ol>
<h2 id="import-jpeg-seriesjpegdicom">Import JPEG series/<span style="color:#444C99;">JPEG連続画像を取り込む（DICOMに変換して取り込む）</span></h2>
<ol>
<li><code>Plug-ins</code>&gt;<code>Database</code>&gt;<code>JPEG to DICOM</code></li>
<li>Go to a folder containing serial images. Select all images by <code>Click</code> first image, anc <code>Shift+Click</code> last image. Or <code>Cntrl+A</code>. Wait for a while.</li>
<li>Patient = sample, date of exam = experiment. I use comment to memorize date of experiment, sample, pixel size.</li>
<li><code>Open</code> Wait for a while.</li>
<li>(Repeat if you have other series)</li>
</ol>
<h2 id="_1"></h2>
<ol>
<li><span style="color:#444C99;"><code>Plug-ins</code>&gt;<code>Database</code>&gt;<code>JPEG to DICOM</code></span></li>
<li><span style="color:#444C99;">連続画像を含むフォルダに行って、すべての画像を選択する。最初の画像を<code>Click</code>、最後の画像を<code>Shift+Click</code>。または<code>Cntrl+A</code>。画像が多いと、選択されるのに、数秒かかる。</span></li>
<li><span style="color:#444C99;">試料名(患者名)や、実験日(検査日)などを入力する。私は、実験日、試料名、画像のピクセルサイズを入力している。</span></li>
<li><span style="color:#444C99;">開く、<code>Open</code>（多少、時間がかかる）</span></li>
<li><span style="color:#444C99;">ほかにも連続画像があれば、作業を繰り返す</span></li>
</ol>
<p><strong>Tips/<span style="color:#444C99;">ヒント</span></strong></p>
<ul>
<li>
<p><strong>Bug</strong> In previous versions of Horos, I was able to import by simply selecting a folder. However, in newer versions, when I import by selecting a folder, the images become out of order. This seems to be a bug. If I add an operation to select all the images as described above, it imports correctly. Paid OsiriX has an update to the JPEG to DICOM plugin in January 2021, and folder selection is back.
    <span style="color:#444C99;"><br>過去のHorosバージョンでは、フォルダを選択するだけで、取り込めました。しかし、新しいバージョンでフォルダ選択で取り込んだ場合、画像の順がバラバラになります。きっとバグです。上記のようにすべての画像を選択する操作を入れると、正常に取り込めます。有料OsiriXでは、2021年1月のJPEG to DICOMプラグインのアップデートがあり、フォルダ選択が可能に戻りました。</span></p>
</li>
<li>
<p><strong>File name Batch conversion/<span style="color:#444C99;">ファイル名一括変換</span></strong>
File name batch conversion is done when there are special circumstances, such as filenames reverting from 9999 to 0001 at the middle of imaging. Horos needs a sequencial number anywhere in the file name. In contrast, 3D slicer requires a complete sequential number (center column of the table). In case that the original filename is left behind the sequential number (right column of the table), 3D slicer will not recognize it as a serial image. When you change the numbering to complete sequential numbers, leave a note in the experiment notebook so that the original file names can be matched (so that the experiment can be reproduced). Just for information, Horos accepts both complete serial name (center column) and serial number plus original name (right column).</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Original name</th>
<th>Compatible<br>for 3D slicer　</th>
<th>Uncompatible for 3Dslicer,<br>but compatible for Horos</th>
</tr>
</thead>
<tbody>
<tr>
<td>DSC_9997.jpg</td>
<td>0001.jpg</td>
<td>0001_DSC_9997.jpg</td>
</tr>
<tr>
<td>DSC_9998.jpg</td>
<td>0002.jpg</td>
<td>0002_DSC_9998.jpg</td>
</tr>
<tr>
<td>DSC_9999.jpg</td>
<td>0003.jpg</td>
<td>0003_DSC_9999.jpg</td>
</tr>
<tr>
<td>DSC_0001.jpg</td>
<td>0004.jpg</td>
<td>0004_DSC_0001.jpg</td>
</tr>
<tr>
<td>DSC_0002.jpg</td>
<td>0005.jpg</td>
<td>0005_DSC_0002.jpg</td>
</tr>
<tr>
<td>DSC_0003.jpg</td>
<td>0006.jpg</td>
<td>0006_DSC_0003.jpg</td>
</tr>
</tbody>
</table>
<ul>
<li>Windows OS: <code>Explore</code>, <code>Select multiple files</code>, <code>Rename</code>. "Input-char+(1).jpg" will be created. Original fileneme will be lost.</li>
<li>Mac OS: ：<code>Finder</code>, <code>Select multiple files</code>, <code>Right click, sub-menu</code>, <code>Rename</code>. For customize in some extent, use pull-down <code>Format</code>, and following pull-down <code>Name and Counter</code>.</li>
<li>
<p>Adobe Bridge (Paid app) can custamize file names in any style you like.</p>
<p><span style="color:#444C99;">
<br>
撮影中にファイル名が9999から0001に戻ったとか、特別な事情があるときに、ファイル名を一括で変換する。CoMBIの撮影が通常に成功した場合は、必要ない。Horosの場合、頭に連番さえあればよく、元ファイル名も残したスタイルが使える。なお、3D slicerの場合、完全な連番（表の中央列）が必要である。連番のうしろに元ファイル名を残した場合（表の右列）、3D slicerは連続画像とは認識しない。完全な連番に変更しても、元々のファイル名と照合できるよう（実験が再現できるよう）、実験ノートにメモを残す。<br>
Windows OSやmacOSの組み込み機能で変換できる。Windowsの場合、<code>Explore</code>で、複数選択<code>Select multiple files</code>、名称変更<code>Rename</code>すると、「入力文字(1).jpg」と、カッコつき連番数字になる。元のファイル名は残らないので注意する。Macの場合、<code>Finder</code>で、複数選択<code>Select multiple files</code>、右クリック（副メニュー）<code>Right click, sub-menu</code>より、ファイル名を変更 <code>Rename</code>。完全変更や連番追記など、ある程度カスタマイズできる。プルダウンメニューの<code>Format</code>, 次のプルダウン、<code>Name and Counter</code>を使う。もし、Adobe Bridge（有料アプリ）があれば、細かく設定ができる。
</span></p>
</li>
</ul>
<h2 id="manage-database">Manage database/<span style="color:#444C99;">データベース（患者名）を整理する</span></h2>
<p>In CoMBI, multiple serial image series (color series and grayscale series, different sizes) are created from a single specimen. If each series is imported separately, they will appear in the list as multiple patients, with two or three rows. The same specimen can be made into one line (one patient name), and the derived series (multiple test items) can be displayed together.</p>
<ol>
<li>Select multiple rows (patient names) to be merged.<code>Shift + click</code></li>
<li>On the selected rows, <code>Right click</code> &gt; <code>Merge Selected Studies</code> </li>
<li>Check <code>Use same Patient ID</code> and <code>Merge as a single study</code></li>
<li><code>OK</code></li>
</ol>
<h2 id="_2"></h2>
<p><span style="color:#444C99;">同一標本から、複数の連続画像シリーズ（カラーシリーズとグレースケールシリーズ、サイズ違い）ができる。それぞれで取り込むと、リストには 2行、3行と、複数患者として表示されてしまう。これを、同一標本なら1行（1患者名）にして、派生したシリーズ（複数の検査項目）をまとめて表示させられます。</span></p>
<ol>
<li><span style="color:#444C99;">まとめたい行(患者名)を複数選択する。<code>Shift + click</code></span></li>
<li><span style="color:#444C99;">選択した行の上で、<code>Right click</code>し、<code>Merge Selected Studies</code>を選ぶ。 </span></li>
<li><span style="color:#444C99;">チェック項目では、上2つの項目にチェックが入っていることを確認する。<code>Use same Patient ID</code>, <code>Merge as a single study</code></span></li>
<li><span style="color:#444C99;"><code>OK</code></span></li>
</ol>
<h2 id="use-grayscale-series">Use grayscale series/<span style="color:#444C99;">グレースケール連続画像の利用</span></h2>
<p>Grayscale images can be used for all reconstruction method, such as 2D orthogonal MPR, 3D MPR, 3D curved MPR, 3D MIP, 3D volume rendering, 3D surface rendering, and 3D endoscopy</p>
<ol>
<li><code>3D viewer</code> or <code>gear mark</code></li>
<li>Select <code>3D MPR</code>, <code>3D volume rendering</code>, etc.</li>
<li>Before reconstruction, input voxel size. XY is pixel size, and Z is sectioning thickness. As Horos is designed for human data, available unit is only mm.</li>
</ol>
<h2 id="_3"></h2>
<p><span style="color:#444C99;">すべての3D再構築法に利用できる。2D orthogonal MPR, 3D MPR, 3D curved MPR, 3D MIP, 3D volume rendering, 3D surface rendering, 3D endoscopy。</span></p>
<ol>
<li><span style="color:#444C99;"><code>3D viewer</code>または<code>歯車マーク</code>より、</span></li>
<li><span style="color:#444C99;"><code>3D MPR</code>, <code>3D volume rendering</code>などを選ぶと、別のウィンドウがでる。</span></li>
<li><span style="color:#444C99;">再構築する前に、ボクセルサイズを入力する。XYはピクセルサイズ、Zは切削厚。ヒトCT用アプリなので、単位がmmしかない。µｍだとおもって入力する。</span></li>
</ol>
<p><strong>Tips/<span style="color:#444C99;">ヒント</span></strong></p>
<ul>
<li>
<p>If you hold down <code>Shift</code> and select MPR or VR, you will be prompted to enter the voxel size each time.
    <span style="color:#444C99;"><br><code>Shift</code>を押しながら、MPRやVRを選択すると、毎回、ボクセルサイズを入力する画面をだせる。</span></p>
</li>
<li>
<p>In both Volume Rendering and MPR, the initial display may be dark, but the brightness and contrast (Window level, Window Width) can be adjusted to make it easier to see.
    <span style="color:#444C99;"><br>Volume RenderingでもMPRでも、初期表示では、暗いかもしれないが、明るさやコントラスト(Window level、Window Width)をいじって、見やすくする。</span></p>
</li>
<li>
<p>In rare cases, the <code>gear mark</code> (2D/3D reconstruction) may disappear. When this happens, I get a message something like "not volume data" and cannot proceed. The cause is unknown. It can be solved by one of the followings;
    <span style="color:#444C99;"><br>まれに、<code>歯車マーク</code>（2D/3D再構築)が消えてしまうことがあります。こうなると「Volume dataではありません」というたぐいのメッセージがでて、先に進めません。原因不明です。解決することはしますが、いいかげんです。次の３つのうちどれかです。</span></p>
<ol>
<li>Wait a few seconds till it come out. <span style="color:#444C99;">そのまま数秒待つと出てきた。</span> </li>
<li>Wait a day, then it come out. <span style="color:#444C99;">次の日にはできた。</span>  </li>
<li>Use other PC. ほかのパソコンではできた。<span style="color:#444C99;">いずれも同一のデータセットです。</span></li>
</ol>
</li>
</ul>
<h2 id="use-color-series">Use color series/<span style="color:#444C99;">カラー画像の利用</span></h2>
<p>Color series can be used only for planer reconstruction; 2D orthogonal MPR, 3D MPR</p>
<ol>
<li><code>3D viewer</code> or <code>gear mark</code></li>
<li>Select <code>2D orthogonal MPR</code> or <code>3D MPR</code>.</li>
<li>Before reconstruction, input voxel size. XY is pixel size, and Z is sectioning thickness. As Horos is designed for human data, available unit is only mm.</li>
</ol>
<h2 id="_4"></h2>
<p><span style="color:#444C99;">面の再構築にだけ利用できる。2D orthogonal MPR, 3D MPR</span></p>
<ol>
<li><code>3D viewer</code>または<code>歯車マーク</code>より、</li>
<li><code>2D orthogonal MPR</code>または<code>3D MPR</code>を選ぶと、別のウィンドウがでる。</li>
<li>再構築する前に、数値を入力する。XYはピクセルサイズ、Zは切削厚。ヒトCT用アプリなので、単位がmmしかない。µｍだとおもって入力する。</li>
</ol>
<p><strong>Tips/<span style="color:#444C99;">ヒント</span></strong></p>
<ul>
<li>
<p>If you hold down <code>Shift</code> and select MPR or VR, you will be prompted to enter the voxel size each time.
    <span style="color:#444C99;"><br><code>Shift</code>を押しながら、MPRやVRを選択すると、毎回、ボクセルサイズを入力する画面をだせる。</span></p>
</li>
<li>
<p>In rare cases, the <code>gear mark</code> (2D/3D reconstruction) may disappear. When this happens, I get a message something like "not volume data" and cannot proceed. The cause is unknown. It can be solved by one of the followings;
    <span style="color:#444C99;"><br>まれに、<code>歯車マーク</code>（2D/3D再構築)が消えてしまうことがあります。こうなると「Volume dataではありません」というたぐいのメッセージがでて、先に進めません。原因不明です。解決することはしますが、いいかげんです。次の３つのうちどれかです。</span></p>
<ol>
<li>Wait a few seconds till it come out. <span style="color:#444C99;">そのまま数秒待つと出てきた。</span> </li>
<li>Wait a day, then it come out. <span style="color:#444C99;">次の日にはできた。</span>  </li>
<li>Use other PC. ほかのパソコンではできた。<span style="color:#444C99;">いずれも同一のデータセットです。</span></li>
</ol>
</li>
</ul>
<hr />
<h2 id="advanced-operation">Advanced operation/発展的な操作</h2>
<p>Below, from left to right, adjust brightness and contrast, move, scale, rotate, and rotate 3D (for volume rendering). Drag the screen up, down, left, or right. To select a tool, either press the respective button or press the show-low cut key. The shortcut keys are definitely more convenient. Browsing serial images is done by mouse scrolling. If your PC monitor is small, the tool buttons may be hidden. Press the <code>&gt;&gt;</code> symbol on the far right to reveal them. Alternatively, you can move the most frequently used buttons and menus to the left. For customizing tool bar, <code>right-click</code> in the gray area where the tool buttons are located.</p>
<p><span style="color:#444C99;">下図、左から、明るさとコントラストの調整、移動、拡大縮小、回転、3D回転（Volume Rendering用）。画面を上下左右にドラッグする。ツール選択は、それぞれのボタンを押すか、ショーロカットキーを押すか。ショートカットキーのほうが断然便利です。連続画像をめくるのは、マウススクロールなど。パソコンモニタが小さい場合、ツールボタンが隠れるときがあります。隠れていれば、右端のマーク<code>&gt;&gt;</code>を押すとでてきます。もしくは、よく使うボタンやメニューを左へ寄せることもできます。ツールボタンがあるグレーの領域で、右クリックすると、ツールボタンの表示位置や有無をカスタマイズできます。</span></p>
<p><img alt="horos" src="../img/horos01.png" title="basic tools" /></p>
<p><em>Tools usally used. <span style="color:#444C99;">いつもつかう、基本のツール</span></em></p>
<h2 id="2d-orthogonal-mpr">2D orthogonal MPR</h2>
<p>Orthogonal 3 planes can be reconstructed. Similar and lighter work than the next 3D MPR. Both grayscale and color series can be reconstructed. MeasurementSince it is almost the same as the following 3D MPR, I skip the explanation.</p>
<p><span style="color:#444C99;"><br>直行面だけで、3面を再構築できる。次の3D MPRより軽い作業。グレースケール連続画像、カラースケール連続画像の両方でできる。静止画、動画、距離の計測ができる。下記の3D MPRとほぼ同じなので、説明は省きます。</span></p>
<h2 id="3d-mpr">3D MPR</h2>
<p>Reconstruct arbitrary planes from grayscale images and color images.</p>
<ul>
<li>The initial view may be dark. Adjust <code>Thick Slab</code> from 1 to 10.</li>
<li>Grab <code>colored axis</code> to rotate. Grab <code>crossing point</code> to move.</li>
<li>Adjust brightness and contrast (WL, WW). Unstable in case of 8-bit JPEG series. Just try.<ol>
<li>Select <code>Opacity</code>.</li>
<li>Change <code>Thick Slab</code></li>
<li>Select <code>Mode</code> for overlay.</li>
</ol>
</li>
<li>Items to be displayed can be changed by a key <code>Tab</code>. Click repeatedly to select.</li>
<li>ON/OFF colored axis. Click <code>Plus button</code> in the tool bar.</li>
<li>Export steal image from active window. <code>File</code> &gt; <code>Export</code> &gt; <code>JPEG</code> or <code>TIFF</code></li>
<li>Export movie. <code>File</code> &gt; <code>Export</code> &gt; <code>Movie</code>. Set <code>From</code> and <code>To</code>. Set <code>Interval</code> as <code>Same as thickness</code> for high quality movie. Adjust interval with <code>sliding bar</code>. Note: Unstable in Horos, while stable in OsiriX. Horos creates very small movies. </li>
<li><code>Length</code> button is a measruement tool. </li>
</ul>
<h2 id="_5"></h2>
<p><span style="color:#444C99;">任意の面を再構築する。グレースケール連続画像、カラースケール連続画像の両方でできる。</span></p>
<ul>
<li><span style="color:#444C99;">初期表示は、まっくらな場合がある。<code>Thick Slab</code>をいじると画像がでてくる。左横の数字を大きくする。たぶん初期値1。2,3,4...10...と大きくしてみる。</span></li>
<li><span style="color:#444C99;"><code>色つき軸</code>を握って、回転させる。<code>軸の交点</code>を握って、中心を移動させる。</span></li>
<li><span style="color:#444C99;"><code>明るさコントラスト調整</code>はぎこちない。初期の表示がいいことが多いが、いろいろいじってみるのも価値あります。下記の３つを変えながら、明るさコントラスト（WL, WW）を変えて、よさそうなところがみつかるか、どうか。</span><ol>
<li><span style="color:#444C99;"><code>Opacity</code>のプルダウンを変えてみる。</span></li>
<li><span style="color:#444C99;"><code>Thick Slab</code>で重ね合わせる量を変えてみる。</span></li>
<li><span style="color:#444C99;"><code>Mode</code>で重ね合わせの種類を変えてみる。</span></li>
</ol>
</li>
<li><span style="color:#444C99;">画面に表示される文字たちを消したいとき、キーボード<code>Tab</code>を何度か押して表示モードを選択します。</span></li>
<li><span style="color:#444C99;">色つき軸の表示をON/OFFできます。ツールバーに<code>十字マークのボタン</code>があります。</span></li>
<li><span style="color:#444C99;">静止画の書き出し、クリックしてアクティブになっているウィンドウを書き出せる。<code>File</code>, <code>Export</code>, <code>JPEG</code>や<code>TIFF</code>など。</span></li>
<li><span style="color:#444C99;">動画の書き出し、<code>File</code>, <code>Export</code>, <code>Movie</code>。Horosの場合、不安定。小さな画面で書き出されてしまう。小さくてもよければ使えます。もしくは、直交面MPRでよければ、そちらのほうは安定しています。OsiriX（有料）は、問題ない。</span>
<code>From</code>, <code>To</code>で範囲を決める。Intervalでは、<code>Same as thicknessにチェック</code>すると高精細。重ければ、スライドバーで調整する。</span></li>
<li><span style="color:#444C99;">メニューバーのボタン、計測ツール、<code>Length</code>で距離をはかれます。</span></li>
</ul>
<hr />
<h2 id="3d-volume-rendering">3D Volume Rendering</h2>
<p>Beautiful volume rendered images are attractive. However, volume rendering alone is not suitable for quantification. It is better to use 3D MPR for length and Segmentation for volume.</p>
<ul>
<li>Initial setup. If you have dGPU, check <code>GPU</code> in the tool bar, or <code>Horos</code>&gt;<code>Reference</code>,<code>GPU</code>,<code>Renderer</code>, check <code>GPU</code>. </li>
<li>Lighten the duty; Change display quality by <code>Level of Detail</code>&gt; from <code>Fine</code> to <code>Coarse</code>. </li>
<li>Select items to be displayed by a key <code>Tab</code>.</li>
<li>Dice like symbol is <code>Orientation</code>. Select display ON or OFF on the tool bar.</li>
<li>Ajust window level and window width by basic tools.</li>
<li>Coloring by CLUT 8 bit. Try preset at first, from <code>CLUT</code> pulldown menu. Custamized color settings can be saved.</li>
<li>
<p>Coloring by CLUT 16 bit. Fine coloring is possible. Custamized color settings can be saved.</p>
</li>
<li>
<p>Export steel image. <code>File</code> &gt; <code>Export</code> &gt; <code>JPEG</code> or <code>TIFF</code></p>
</li>
<li>Export movie by <code>Fly Thru</code><ol>
<li><code>Fly Thru</code> on the tool bar. Or  menu bar &gt; <code>3D viewer</code> &gt; <code>Add Fly Thru Point</code>.</li>
<li>Record steps. Repeat moving a little then click <code>+</code>. Movies will be created tracking the steps. Crop can be record, but WW, WL can not (maybe a bug)</li>
<li>Save steps as a file. Button <code>Export</code> (optional).</li>
<li>Go to tab <code>Movie</code>.</li>
<li>Set <code>Number of Frames</code>. 30 frame/sec in general. ex. 300 flame to create 10 sec movie.</li>
<li>Click <code>Compute</code> once.</li>
<li>Format <code>QuickTime</code>, Quality:<code>Best Rendering</code>, Size <code>Current</code>. If the movie become too heavy in the next step, come back here and change settings.</li>
<li><code>Save</code> as a movie file. Wait for a while. </li>
</ol>
</li>
</ul>
<h2 id="_6"></h2>
<p><span style="color:#444C99;">いかにも3D画像を再構築する。美しい画像は魅力的である。画像を見せるだけで実験データとして済むなら、このVolume Renderingだけでよい。しかし、Volume Renderingだけでは数値化には向かない。長さは3D MPR、体積はSegmentationで行うのがよい。</span></p>
<ul>
<li><span style="color:#444C99;">最初の設定：もしGPUが別についているマシンなら、ツールバー内にあるGPUにチェックをいれます。もしくは、<code>Horos</code>&gt;<code>Reference</code>,<code>GPU</code>,<code>Renderer</code>,<code>GPUにチェック</code>します。そのほうが快適に動作するでしょう。</span></li>
<li><span style="color:#444C99;">動作が重いとき、<code>Level of Detail</code>のスライダーを、<code>Fine</code>から<code>Coarse</code>に寄せます。粗い表示にすると軽くなる。作業は粗い表示で、いざ静止画や動画に描き出すときは、細かい表示を使います。</span></li>
<li><span style="color:#444C99;">画面に表示される文字たちを消したいとき、キーボード<code>Tab</code>を何度か押して表示モードを選択します。</span></li>
<li><span style="color:#444C99;">画面のさいころ様のマークは、<code>Orientation</code>です。ツールバーのボタンで表示をON/OFFします。</span></li>
<li><span style="color:#444C99;">明るさとコントラスト window level and window width。基本ツールで、上下左右ドラッグします。</span></li>
<li><span style="color:#444C99;">色つけ CLUT 8 bit、まずはプリセット、CLUTのプルダウンから選べます。カスタマイズして、プリセットを作って保存することもできます。</span></li>
<li><span style="color:#444C99;">色つけ CLUT 16 bit、豊かな階調で色付けできます。カスタマイズしてプリセットとして保存できます。</span></li>
<li><span style="color:#444C99;">静止画の書き出し <code>File</code>, <code>Export</code>, <code>JPEG</code>や<code>TIFF</code>など。</span></li>
<li><span style="color:#444C99;">動画の書き出し Fly Thru</span><ol>
<li><span style="color:#444C99;">ツールバーの<code>ボタンFly Thru</code>を選びます。または、メニューバーの<code>3D viewer</code>, <code>Add Fly Thru Point</code>を選びます。</span></li>
<li><span style="color:#444C99;">Stepを記録　ちょっと動かしては、<code>+</code>ボタンをおして、繰り返します。動かしたい奇跡をまずは点で記録しています。あとで点を結んで動画にします。ヒント、クロップ操作も記録できます。明るさコントラスト調整は、記録できない、ことが多い。たぶんバグ。</span></li>
<li><span style="color:#444C99;">オプション　記録した点を、ファイル保存できます。下のボタン<code>Export</code></span></li>
<li><span style="color:#444C99;">動画　タブ<code>Movie</code>に移ります</span></li>
<li><span style="color:#444C99;">Number of Frames, 作りたい動画の長さを、秒数×30で入力。一般に、30 frame/secです。10秒動画にしたいなら、300です。</span></li>
<li><span style="color:#444C99;"><code>Compute</code>を一度押します。</span></li>
<li><span style="color:#444C99;">形式<code>QuickTime</code>、Quality:<code>Best Rendering</code>、Size <code>Current</code>。次のステップで重すぎれば、サイズを調整してください。</span></li>
<li><span style="color:#444C99;"><code>Save</code>,ファイル名を決めたりして、書き出しは時間がかかる。 </span></li>
</ol>
</li>
</ul>
<hr />
<h2 id="segmentation">セグメンテーション　Segmentation</h2>
<p>Segmentation is the selection and drawing of only a specific region (Region of Interest, ROI). From the selected ROIs, volume values are obtained. In some experiments, segmentation may be a goal. The ROI can be specified either by light/dark selection (Horos/ROI&gt;Grow Region) or by manual selection of the shape (Horos/Button Closed Polygon). In the case of CoMBI, since it is a color image, you can also use area specification by color (Photoshop/Selection/Grow Region + Horos/Grow Region).</p>
<ol>
<li><strong>ROI specified by brightness</strong>: This method works well in human CT data to segment bones and lungd, a shape with a clear contrast. In the other hand, this method may not work well with CoMBI serial color images of research samples.</li>
<li><strong>ROI specification manually</strong>: Manual drawing is reliable, but takes a long time. This method can be done in grayscale and color image series. This is time consuming, for example, it took me half a day to make segments of 19 cervical lymph nodes.</li>
<li><strong>Area specified by color</strong>: Photoshop or ImageJ can automatically specify a color gamut by referring to a color serial images, and save as binary image files. In Photoshop, areas are selected by eye-dropper tool, and can add and delete colors, however, it can not input values. In ImageJ, values of RGB, biriliant, and brightness are input, but multiple colors can not selected easily.</li>
</ol>
<p><span style="color:#444C99;">セグメンテーションは、特定の領域（関心領域、Region of Interest、ROI）だけを選択すること、描出することです。選択したROIからは、体積の数値が得られます。実験では、セグメンテーションが目標になる場合があるでしょう。ROIを指定する方法として、一般的な画像（グレースケールのDICOM画像）では、明暗で選択する方法(Horos/ROI&gt;Grow Region)と、形状を手作業で選択する方法(Horos/ボタンClosed Polygon)があります。CoMBIの場合、カラー画像なので、色域指定も利用できます(Photoshop/選択範囲/色域指定 + Horos/Grow Region)。</span></p>
<ol>
<li><span style="color:#444C99;"><strong>明暗でROI指定</strong>: 明暗のコントラストがハッキリし、かつ、輪郭がハッキリした形状であればうまくいくでしょう。例えば、ヒトCTデータなら、骨や肺です。しかしながら、研究試料のCoMBI連続画像では、この方法ではうまくいかないことが多いでしょう。この方法だけでは思い通りに指定できず、結局手描きがいいとなるでしょう。</span></li>
<li><span style="color:#444C99;"><strong>手作業でROI指定</strong>: 見手作業は確実です。ROI指定で参照する画像は、グレースケールでもカラーでも使えます。CoMBIの場合、カラー画像は参照しやすく価値があります。ROI情報はテキストデータに保存され、あとでVolume Renderingによる3D再構築像に重ねて表示できます。ただし、自動ではない分、時間がかかります。例えば、頚リンパ節 19個を選択するのに半日かかりました。</span></li>
<li><span style="color:#444C99;"><strong>色域指定</strong>: Photoshopなどで、カラー連続画像を参照し、色域指定を自動で行えます。指定領域を二値化した連続画像をあらたに生成し、ROI(Grow Region)を自動で行います。二段階になりますが、いずれも自動です。色域指定にはPhotoshopやImageJがつかえます。Photoshopの場合、指定条件は見た目で、スポイトで選択します。さらに、複数の色を追加したり、削除したりできるのは便利です。しかし、数値入力では指定できません。ImageJの場合、RGB、彩度、明暗の各情報を数値入力で指定します。しかし、複数色の追加や削除が容易ではありません。</span></li>
</ol>
<hr />
<h3 id="1-roi-specified-by-brightnessroi">1. ROI specified by brightness/<span style="color:#444C99;">明るさでROI指定</span></h3>
<p>Select area with specific brightness. This may not work for CoMBI data, thus I describe simply here.</p>
<ol>
<li>Go to <code>Orthogonal planes</code> or <code>3D MPR</code></li>
<li>Use grayscale or color images.</li>
<li>ROI/Grow Region</li>
</ol>
<h3 id="_7"></h3>
<p><span style="color:#444C99;">グレースケール画像で、明るさだけで選択する。あんまりうまくいかないと思うのであっさりと記載します。</span></p>
<ol>
<li><span style="color:#444C99;">直行面MPRのウィンドウで行います（3D MPRでもできます）。</span></li>
<li><span style="color:#444C99;">グレーでもカラー画像でも使えます。</span></li>
<li><span style="color:#444C99;">ROI/Grow Region</span></li>
</ol>
<h3 id="2-roi-specification-manuallyroi">2. ROI specification manually/<span style="color:#444C99;">手作業でROI指定</span></h3>
<h4 id="preparation">Preparation</h4>
<ol>
<li>Go to <code>Orthogonal planes</code> or <code>3D MPR</code></li>
<li>Use grayscale or color images.</li>
</ol>
<h4 id="create-roi-save-roi">Create ROI, save ROI</h4>
<ol>
<li>Tool <code>Closed Polygon</code> can select complicated shape.</li>
<li>Draw ROI every several images.</li>
<li>Fill between ROIs automativally. Display a slice with a ROI, and <code>ROI</code> &gt; <code>ROI Volume</code> &gt; <code>Generate missing ROIs</code></li>
<li>Name ROIs. <code>ROI</code> &gt; <code>ROI rename</code> &gt; <code>All ROIs in this series</code>. To view names, open <code>ROI</code> &gt; <code>ROI manager</code>.</li>
<li>Save ROIs. <code>ROI</code> &gt; <code>Save All ROIs in this series</code>. Extension is ".rois_series".</li>
<li>To create multiple ROI, delete primary ROI after saving. <code>ROI</code> &gt; <code>Delete all ROIs in this series</code>. Multiple ".rois_series" files are created, thus name systematically to distinguish each other.</li>
<li>Repeat creat/save/delete.</li>
</ol>
<h4 id="display-roi-overlaied-on-volume-rendered-image">Display ROI overlaied on volume rendered image</h4>
<ol>
<li>Reveal grayscale series to be volume rendered in the 2D Viewer. (double click a patient in the database, and reveal in the 2D Viewer.)</li>
<li>Import roi_series files. <code>ROI</code> &gt; <code>Import ROIs</code>. If you import multiple ROI, repeat import. </li>
<li>Volume rendering. <code>3D</code> &gt; <code>Volume Rendering</code>. Input XYZ values. 3D Viewer will be opened.</li>
<li>Check the list of ROIs. <code>ROI</code> &gt; <code>ROI manager</code>. A window "3D ROI manager" shows the list. </li>
<li>ROI display ON/OFF by check box. Change color, and opacity.</li>
</ol>
<h4 id="use-values-of-roi-volume"><span style="color:#444C99;">Use values of ROI volume/体積の数値</span></h4>
<ol>
<li>See <code>2D viewerのROI manager</code> &gt; <code>Volume</code> (Only this method is stable, and below 2 are unstable.)</li>
<li>3D Viewer &gt; <code>ROI</code> &gt; <code>ROI Volume</code> &gt; <code>Compute Volume</code> (Unstable, Horos often shuts down. OsiriX is stable.)</li>
<li>3D Viewer &gt; <code>ROI manager</code> shows <code>Volume</code>, but values are odd. Most of small ROI become "0". Useless.</li>
</ol>
<h4 id="_8"><span style="color:#444C99;">準備</span></h4>
<ol>
<li><span style="color:#444C99;">直行面MPRのウィンドウで行います（3D MPRでもできます）</span></li>
<li><span style="color:#444C99;">グレーでもカラー画像でも使えます。</span></li>
</ol>
<h4 id="roiroi"><span style="color:#444C99;">ROI指定、ROIファイル保存</span></h4>
<ol>
<li><span style="color:#444C99;"><code>ボタンClosed Polygon</code>で複雑な形状でもROIにする。</span></li>
<li><span style="color:#444C99;">数枚ごとにROIを囲む。</span></li>
<li><span style="color:#444C99;">描いたROIとROIの間を自動で埋める。 <code>ROI</code> &gt; <code>ROI Volume</code> &gt; <code>Generate missing ROIs</code>。このとき、描いたROIがあるスライスを表示しておく。ROIがないスライスだと、メニューが非アクティブで押せない。</span></li>
<li><span style="color:#444C99;">ROI の名前をきめる。<code>ROI</code> &gt; <code>ROI rename</code> &gt; <code>All ROIs in this series</code>。(<code>ROI</code> &gt; <code>ROI manager</code> を開いておくと、名前が決まったのが見える)</span></li>
<li><span style="color:#444C99;">ROIを保存する。<code>ROI</code> &gt; <code>Save All ROIs in this series</code>。拡張子、rois_series。</span></li>
<li><span style="color:#444C99;">複数のROIを指定したいとき、いったん最初のROIを削除する。<code>ROI</code> &gt; <code>Delete all ROIs in this series</code></span></li>
<li><span style="color:#444C99;">複数のROIを指定するには、上記を繰り返す。（注意）ROIファイルが複数できることになります。どれがどれか分かるように、ファイル名を決めます。</span></li>
</ol>
<h4 id="roi3d"><span style="color:#444C99;">ROIを3D再構築像に重ね合わせる</span></h4>
<ol>
<li><span style="color:#444C99;">3D再構築につかうグレースケール連続画像を2D Viewerに表示させる。（データベースウィンドウで、データをダブルクリックすると、表示されるのが2D Viewer）</span></li>
<li><span style="color:#444C99;">roi_seriesファイルを読み込む<code>ROI</code> &gt; <code>Import ROIs</code>。複数あれば複数回読み込む。 </span></li>
<li><span style="color:#444C99;">3D 再構築。<code>3D</code> &gt; <code>Volume Rendering</code> XYZのスケールを入力し、3D Viewer モードになる</span></li>
<li><span style="color:#444C99;">ROI ファイルのリストを表示 <code>ROI</code> &gt; <code>ROI manager</code>。「3D ROI manager」というウィンドウが開く。読み込んだROIのリストが表示される (メニュー表記は同じだが、上記の 2DViewer モードのときは異なるウィンドウ)</span></li>
<li><span style="color:#444C99;">ROI表示のオンオフと着色　左端のチェック欄に、チェックを入れると、VRに重ねて表示される。 表示色を変更できる。透明度も調整できる。</span></li>
</ol>
<h4 id="_9"><span style="color:#444C99;">体積の数値</span></h4>
<p><span style="color:#444C99;">3通りあるがHorosで安定しているのは１だけ。</span></p>
<ol>
<li><span style="color:#444C99;"><code>2D viewerのROI manager</code>、<code>Volume</code>が表示される。下記のComputeVolumeよりやや大きめに出るが、比較データのときは、数値をよむ方法を統一すればよい。Horosは、これだけが安定している。</span></li>
<li><span style="color:#444C99;">3D Viewerで、<code>ROI</code> &gt; <code>ROI Volume</code> &gt; <code>Compute Volume</code>。注意:Horosはよく落ちるのでおすすめしない。OsiriXは安定している。</span></li>
<li><span style="color:#444C99;"><code>3D ViewerのROI manager</code> でも、<code>Volume</code> が表示されるが、小さいモノはゼロとなったり、数値が変になる。おすすめしない。</span></li>
</ol>
<h3 id="3roi-by-color-gamut">3.ROI by color gamut/色域指定</h3>
<p>Two apps, Photoshop and Horos, are used to create ROI. Photoshop specifies ROI by color gamut, then save images as binary. Almost automatic method.</p>
<p><span style="color:#444C99;">Photoshopで二値化したのちHorosでROI指定する。2段階だが全自動。</span></p>
<h4 id="photoshop">Photoshop</h4>
<ol>
<li>Prepare color series for specification by color gamut by Photoshop, and grayscale images for VR by Horos. Create a folder to save binary images later.</li>
<li>Open one color image in the Photoshop.</li>
<li>Start recording in <code>Action</code><ol>
<li><code>Select</code>&gt;<code>Color Range...</code>. Set tolerances low (5 or so). Use eye-drop tool to specify. Add color <code>+</code>, delete color <code>-</code>.</li>
<li>Binary image<ol>
<li>Button <code>OK</code> shows selected area.</li>
<li>Keyboard <code>Delete</code> deletes selection. Color after selection is set as <code>White</code>.</li>
<li>(Optional) Smooth borders. <code>Select</code> &gt; <code>Modify</code> &gt; <code>Smooth...</code></li>
<li>Invert selection <code>Select</code> &gt; <code>Inverse</code></li>
<li>Keyboard <code>Delete</code> delete selection. Color after selection is set as <code>Black</code>.</li>
<li><code>Image</code> &gt; <code>Mode</code> &gt; <code>Grayscale</code>. </li>
</ol>
</li>
<li><code>Save as</code> in the folder prepared.</li>
<li><code>Close</code> image.</li>
</ol>
</li>
<li>Stop recording in <code>Action</code></li>
<li>Batch prossess. <code>File</code> &gt; <code>Automate</code> &gt; <code>Batch...</code>. Prosess all serial images using the action recorded.</li>
</ol>
<h4 id="photoshop_1"><span style="color:#444C99;">Photoshop</span></h4>
<ol>
<li><span style="color:#444C99;">準備 カラー連続画像は、Photoshop色域指定用、 グレースケール連続画像は、Horos, VR用。フォルダを新規にひとつつくる（二値化白黒連続画像用）</span></li>
<li><span style="color:#444C99;">カラー画像のうち、色域指定に使えそうな一枚だけ開く</span></li>
<li><span style="color:#444C99;">アクションで記録開始</span><ol>
<li><span style="color:#444C99;">Photoshopで、特定の色を選ぶ。<code>選択範囲 Select</code>&gt;<code>色域指定 Color Range...</code>　許容量を少なめ（5とか）にして、スポイトで指定する。追加 (+)や削減(ー)を使って調節する。</span></li>
<li><span style="color:#444C99;">二値化白黒画像とする</span><ol>
<li><span style="color:#444C99;">OKボタンをおすと、選択領域が表示される。</span></li>
<li><span style="color:#444C99;">キーボード<code>Delete</code>で選択範囲を削除する。削除後の色は<code>White</code>を指定する</span></li>
<li><span style="color:#444C99;">（必要なら、境界線をなめらかにする。<code>選択範囲 Select</code>&gt; <code>選択範囲の変更 Modify</code>&gt; <code>滑らかに Smooth...</code>）</span></li>
<li><span style="color:#444C99;">選択範囲を反転させる。<code>選択範囲 Select</code>&gt; <code>反転 Inverse</code></span></li>
<li><span style="color:#444C99;">キーボード<code>Delete</code>で選択範囲を削除する。削除後の色は<code>Black</code>を指定する</span></li>
<li><span style="color:#444C99;"><code>イメージ Image</code>&gt; <code>モード Mode</code>&gt; <code>グレースケール grayscale</code> </span></li>
</ol>
</li>
<li><span style="color:#444C99;">別名で保存　<code>Save as</code>新しく作っておいたフォルダを指定して保存する</span></li>
<li><span style="color:#444C99;">画像を閉じる <code>Close</code></span></li>
</ol>
</li>
<li><span style="color:#444C99;">アクションの記録停止</span></li>
<li><span style="color:#444C99;">連続画像に、記録したアクションを一括処理する　<code>ファイル File</code>&gt; <code>自動処理 Automate</code>&gt; <code>バッチ Batch...</code></span></li>
</ol>
<h5 id="tips">Tips/<span style="color:#444C99;">ヒント</span></h5>
<ul>
<li>
<p>Action stopped at "invet", if there was no selection area at all. To solve this issue, I drew a very small square at the corner of every image using the color I wanted to specify. There was even a small selection area in all images, and the action worked correctly.
    <span style="color:#444C99;"><br>アクションが途中で止まることがあった。選択領域が全くない場合、選択範囲の反転で、止まっていました。対策として、すべての画像の端っこに、指定したい色で極小の四角を描きました。これで、すべての連続画像にわずかでも選択範囲が存在することになり、アクションが正常に行われました。</span></p>
</li>
<li>
<p>Don't forget to save as binarized images in Phothoshop. If images are left as RGB, the subsequent Horos will not be able to select the ROI properly.
    <span style="color:#444C99;"><br>二値化画像をグレースケールにするのを忘れずに。RGBのままだと、以降のHorosでうまくROIが選べない。</span></p>
</li>
<li>
<p>If the Action is saved as a Droplet file, it can be used for the same process in another experiment.
    <span style="color:#444C99;"><br>アクションをDropletファイルとして保存しておけば、別の実験での同一処理につかえます。</span></p>
</li>
</ul>
<h4 id="horososirix">Horos/OsiriX</h4>
<ol>
<li>Import binary serial images into Horos. <code>plug-in</code>, <code>JPEG to DICOM</code>. Select serial images by <code>click</code> first image and <code>shift+click</code> last image, then import.</li>
<li>In the database window, <code>double click</code> binary image series, to shown in 2D viewer.</li>
<li><code>ROI</code>, <code>Grow Region</code>. Threshold is set as 100 or any number.</li>
<li>Save ROI as a file. <code>ROI</code>, <code>Save all ROIs in this series</code></li>
<li>Go back to database window, <code>double click</code> grayscale image series (for VR) to shown in 2D viewer.</li>
<li>Import ROI file. <code>ROI</code>, <code>Import ROI</code></li>
<li><code>Volume Rendering</code> to opne 3D Viewer</li>
<li>Set up appearance of ROI <code>ROI</code>, <code>ROI manager</code></li>
<li>(Create steal images and movies.)</li>
</ol>
<h4 id="_10"></h4>
<ol>
<li><span style="color:#444C99;">二値化白黒連続画像をHorosに読み込む　<code>plug-in</code>, <code>JPEG to DICOM</code> 。連続画像を全選択して（一番最初の画像をクリック、shiftを押しながら一番最後の画像をクリック）、読み込む</span></li>
<li><span style="color:#444C99;">読み込んだ二値化データをダブルクリックし、2D viewerをひらく</span></li>
<li><span style="color:#444C99;">ROI を指定する。<code>ROI</code>, <code>Grow Region</code> 閾値は適当に100とする（どうせ二値化なのでハズレなし）</span></li>
<li><span style="color:#444C99;">ROI ファイルに保存。<code>ROI</code>, <code>Save all ROIs in this series</code></span></li>
<li><span style="color:#444C99;">データベースウィンドウに戻り、グレースケール連続画像（VR用）をダブルクリック。2D viewerを開く。</span></li>
<li><span style="color:#444C99;">保存したROI ファイルを読み込む　<code>ROI</code>, <code>Import ROI</code></span></li>
<li><span style="color:#444C99;">3D 再構築する。 <code>Volume Rendering</code>で3D Viewerがひらく</span></li>
<li><span style="color:#444C99;">ROI の表示設定 <code>ROI</code>, <code>ROI manager</code></span></li>
<li><span style="color:#444C99;">静止画も動画も書き出せる</span></li>
</ol>
<h4 id="roi-by-imagejfijiimagejfijiroi">ROI by ImageJ/FIJI/<span style="color:#444C99;">ImageJ/FIJIでROI</h4>
<p>ImageJ can create ROI by color gamut, instead of Photoshop. Use <code>Image</code>, <code>Adjust</code>, <code>Color Threshold</code>, and input values. I'm not familiar with it, so I won't explain it here.
<span style="color:#444C99;"><br>Photoshopの代わりに、ImageJでもできます。<code>Image</code>, <code>Adjust</code>, <code>Color Threshold</code>。基本的に数値入力です。つかいなれていないので、解説は省略します。</span></p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2021 Yuki Tajika, CC BY 4.0
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.caa56a14.min.js"></script>
      
    
  </body>
</html>